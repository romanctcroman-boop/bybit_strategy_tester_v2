# üîß –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–û–ô –°–ò–°–¢–ï–ú–´

**–î–∞—Ç–∞:** 2025-11-10  
**–°—Ç–∞—Ç—É—Å:** üî¥ –¢–†–ï–ë–£–Æ–¢ –ù–ï–ú–ï–î–õ–ï–ù–ù–û–ì–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

---

## üö® –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ API –∫–ª—é—á–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–í `.env` —Ñ–∞–π–ª–µ:
- DeepSeek: **8 –∫–ª—é—á–µ–π** (DEEPSEEK_API_KEY + _1 –¥–æ _7) ‚úÖ
- Perplexity: **4 –∫–ª—é—á–∞** (PERPLEXITY_API_KEY + _1 –¥–æ _3) ‚úÖ

–í `background_diagnostic_service.py` (—Å—Ç—Ä–æ–∫–∏ 64-74):
```python
# DeepSeek keys (8 —à—Ç) - –ü–†–ê–í–ò–õ–¨–ù–û
for i in range(1, 9):
    key = os.getenv(f"DEEPSEEK_API_KEY_{i}")

# Perplexity keys (4 —à—Ç) - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
for i in range(1, 5):  # –ò—â–µ—Ç _1, _2, _3, _4
    key = os.getenv(f"PERPLEXITY_API_KEY_{i}")
```

**–§–∞–∫—Ç –≤ .env:**
```properties
PERPLEXITY_API_KEY=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   # –û—Å–Ω–æ–≤–Ω–æ–π
PERPLEXITY_API_KEY_1=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  # –ö–ª—é—á 1
PERPLEXITY_API_KEY_2=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  # –ö–ª—é—á 2
PERPLEXITY_API_KEY_3=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  # –ö–ª—é—á 3
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
- DeepSeek: –Ω–∞—Ö–æ–¥–∏—Ç 0 –∫–ª—é—á–µ–π (–∏—â–µ—Ç _1-_8, –Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–π = DEEPSEEK_API_KEY, –±–µ–∑ –Ω–æ–º–µ—Ä–∞!)
- Perplexity: –Ω–∞—Ö–æ–¥–∏—Ç 3 –∫–ª—é—á–∞ (_1, _2, _3), –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- DeepSeek: 8 –∫–ª—é—á–µ–π (DEEPSEEK_API_KEY + DEEPSEEK_API_KEY_1 –¥–æ DEEPSEEK_API_KEY_7)
- Perplexity: 4 –∫–ª—é—á–∞ (PERPLEXITY_API_KEY + PERPLEXITY_API_KEY_1 –¥–æ PERPLEXITY_API_KEY_3)

---

### 2. ‚ùå –î–≤–∞ MCP —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–í VS Code tasks.json:
```json
{
    "label": "Start Perplexity MCP Server",
    "runOptions": {
        "runOn": "folderOpen"  // ‚Üê –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ IDE
    }
}
```

**–ò –µ—â–µ –¥–æ–±–∞–≤–∏–ª–∏:**
```json
{
    "label": "Start Background Diagnostic Service",
    "runOptions": {
        "runOn": "folderOpen"  // ‚Üê –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ IDE
    }
}
```

**–ù–æ diagnostic service –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç MCP Server**, –æ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ–≥–æ!

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ IDE ‚Üí MCP Server –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
- Diagnostic service —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –°–£–©–ï–°–¢–í–£–Æ–©–ò–ô MCP Server  
- **–ü—Ä–æ–±–ª–µ–º–∞ –ù–ï –≤ –¥–≤—É—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö!** ‚úÖ –í—Å–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

###3. ‚ö†Ô∏è –¢—Ä–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ Windows 11

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ü—Ä–∏ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–µ Windows –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è 3 —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:
1. **MCP Server** (start_mcp_server.ps1)
2. **MCP Monitor** (start_monitor_delayed.ps1) - **–ì–∞—Å–Ω–µ—Ç –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è!**
3. **Background Diagnostic Service** (background_diagnostic_service.py)

**–ü—Ä–∏—á–∏–Ω–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ MCP Monitor:**  
–í tasks.json:
```json
{
    "label": "Start MCP Monitor (delayed)",
    "command": "powershell",
    "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "d:\\bybit_strategy_tester_v2\\scripts\\start_monitor_delayed.ps1"
    ],
    "runOptions": {
        "runOn": "folderOpen"  // ‚Üê –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ IDE
    }
}
```

**–ï—Å–ª–∏ monitor –ø–∞–¥–∞–µ—Ç ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

**–ù—É–∂–Ω—ã –ª–∏ 3 —Ç–µ—Ä–º–∏–Ω–∞–ª–∞?**  
- ‚úÖ **MCP Server** - –Ω–µ–æ–±—Ö–æ–¥–∏–º (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä)
- ‚ùì **MCP Monitor** - –≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–±—ã—Ç–æ—á–µ–Ω (–µ—Å–ª–∏ –µ—Å—Ç—å Diagnostic Service)
- ‚úÖ **Background Diagnostic Service** - –Ω–µ–æ–±—Ö–æ–¥–∏–º (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**  
–û—Ç–∫–ª—é—á–∏—Ç—å MCP Monitor, –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ:
1. MCP Server
2. Background Diagnostic Service

---

### 4. ‚úÖ –ó–∞–ø—É—Å–∫ Diagnostic Service —Å MCP Server + –∞–≥–µ–Ω—Ç–∞–º–∏

**–í–æ–ø—Ä–æ—Å:**  
"–°–ª—É–∂–±–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –¥–æ–ª–∂–Ω–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è —Å –∑–∞–ø—É—Å–∫–æ–º MCP server, –∞–≥–µ–Ω—Ç–æ–≤ –∏ –º–æ–¥—É–ª–µ–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∫–ª—é—á–µ–π"

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**  
```json
{
    "label": "Start All Dev",
    "dependsOn": [
        "Start Postgres and migrate",
        "Start backend (uvicorn)",
        "Start frontend (vite)",
        "Start Perplexity MCP Server",
        "Start Background Diagnostic Service"  // ‚Üê –î–æ–±–∞–≤–ª–µ–Ω!
    ],
    "dependsOrder": "parallel"  // ‚Üê –í—Å–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**  
Diagnostic Service –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** —Å MCP Server, –Ω–æ:
- MCP Server –Ω—É–∂–Ω–æ ~2-3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è —Å—Ç–∞—Ä—Ç–∞
- Diagnostic Service —Å—Ä–∞–∑—É –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å MCP ‚Üí **–ø–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å!**

**–†–µ—à–µ–Ω–∏–µ:**  
–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –≤ –Ω–∞—á–∞–ª–µ Diagnostic Service:
```python
async def run(self):
    await self.load_api_keys()
    
    # –ñ–¥—ë–º –∑–∞–ø—É—Å–∫–∞ MCP Server (5 —Å–µ–∫—É–Ω–¥)
    logger.info("‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ MCP Server (5s)...")
    await asyncio.sleep(5)
    
    logger.info("‚úÖ –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 60s)")
    # ...
```

---

### 5. ‚è±Ô∏è –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ 30 –º–∏–Ω—É—Ç

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**  
"–î–∞–ª–µ–µ, –æ–Ω –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç"

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
self.analysis_interval = 600  # 10 –º–∏–Ω—É—Ç
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```python
self.analysis_interval = 1800  # 30 –º–∏–Ω—É—Ç (30 * 60 —Å–µ–∫—É–Ω–¥)
```

---

### 6. ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫/—Ç–µ—Ä–º–∏–Ω–∞–ª –¥–ª—è Diagnostic Service

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**  
"–ß—Ç–æ-–±—ã —Å–µ—Ä–≤–µ—Ä –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ, —Ç–µ—Ä–º–∏–Ω–∞–ª–µ"

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**  
```json
{
    "label": "Start Background Diagnostic Service",
    "isBackground": true,  // ‚Üê –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ ‚úÖ
    "presentation": {
        "echo": true,
        "reveal": "silent",  // ‚Üê –¢–µ—Ä–º–∏–Ω–∞–ª —Å–∫—Ä—ã—Ç
        "focus": false,
        "panel": "shared"
    }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–¢–µ—Ä–º–∏–Ω–∞–ª —Å–∫—Ä—ã—Ç (`reveal: "silent"`), –Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–µ–Ω!

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```json
"presentation": {
    "echo": true,
    "reveal": "always",  // ‚Üê –¢–µ—Ä–º–∏–Ω–∞–ª –≤—Å–µ–≥–¥–∞ –≤–∏–¥–µ–Ω
    "focus": false,
    "panel": "dedicated"  // ‚Üê –û—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å
}
```

---

### 7. üîÑ –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**  
"–ï—Å–ª–∏ –∞–≥–µ–Ω—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ä–∞–±–æ—Ç—É DeepSeek Agent, Perplexity Agent –∞ –≤ —ç—Ç–æ –≤—Ä–µ–º—è –Ω–∞–¥–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É, —Ç–æ —Å–µ—Ä–≤–µ—Ä –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–ø–µ—Ä–≤–∞ –∂–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤ –∞ –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏"

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**  
‚ùå –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –∞–≥–µ–Ω—Ç–æ–≤!

**–†–µ—à–µ–Ω–∏–µ:**  
–î–æ–±–∞–≤–∏—Ç—å lock-—Ñ–∞–π–ª—ã –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏:

```python
async def wait_for_agents_idle(self):
    """–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤"""
    agent_lock_files = [
        Path("logs/deepseek_agent.lock"),
        Path("logs/perplexity_agent.lock")
    ]
    
    max_wait = 300  # –ú–∞–∫—Å–∏–º—É–º 5 –º–∏–Ω—É—Ç
    waited = 0
    
    while waited < max_wait:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ lock-—Ñ–∞–π–ª—ã
        all_idle = True
        for lock_file in agent_lock_files:
            if lock_file.exists():
                # –ê–≥–µ–Ω—Ç –∑–∞–Ω—è—Ç
                all_idle = False
                logger.info(f"‚è≥ –ñ–¥—ë–º –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è {lock_file.name}...")
                break
        
        if all_idle:
            return True
        
        await asyncio.sleep(10)  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
        waited += 10
    
    logger.warning("‚ö†Ô∏è –ê–≥–µ–Ω—Ç—ã –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏–ª–∏—Å—å –∑–∞ 5 –º–∏–Ω—É—Ç, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É")
    return False

async def diagnostic_cycle(self):
    # –ñ–¥—ë–º –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π
    await self.wait_for_agents_idle()
    
    # –ü—Ä–æ–≤–æ–¥–∏–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
    # ...
```

---

### 8. üìä –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**  
"–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–µ—Ä–≤–µ—Ä–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –¥–æ–ª–∂–µ–Ω –≤—ã–≤–æ–¥–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏"

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**  
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:
```python
logger.info(f"   MCP: {'‚úÖ' if mcp_ok else '‚ö†Ô∏è'} | "
           f"DeepSeek: {'‚úÖ' if deepseek_ok else '‚ö†Ô∏è'} | "
           f"Perplexity: {'‚úÖ' if perplexity_ok else '‚ö†Ô∏è'}")
```

**–ù–æ —Ç–µ—Ä–º–∏–Ω–∞–ª —Å–∫—Ä—ã—Ç (`reveal: "silent"`)!**

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** (—Å–º. –ø.6)

---

### 9. üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º

**–ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
1. `auto_diagnostic_system.py` (634 —Å—Ç—Ä–æ–∫–∏) - ‚ùå –ò–∑–±—ã—Ç–æ—á–Ω–∞—è, —Å –æ—à–∏–±–∫–∞–º–∏
2. `simple_diagnostic_with_agents.py` (257 —Å—Ç—Ä–æ–∫) - ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è
3. `background_diagnostic_service.py` (316 —Å—Ç—Ä–æ–∫) - ‚úÖ **–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**
4. `diagnostic_dashboard.py` (107 —Å—Ç—Ä–æ–∫) - ‚úÖ Dashboard –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
5. `deepseek_self_diagnostic.py` - –°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**  
–£–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–∞–π–ª—ã:
- `auto_diagnostic_system.py` (–∏–∑–±—ã—Ç–æ—á–Ω–∞—è)
- `simple_diagnostic_with_agents.py` (–∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ background service)
- `deepseek_self_diagnostic.py` (—Å—Ç–∞—Ä–∞—è)

**–û—Å—Ç–∞–≤–∏—Ç—å:**
- `background_diagnostic_service.py` (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å)
- `diagnostic_dashboard.py` (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)

---

## ‚úÖ –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (—Å–µ–π—á–∞—Å)

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É API –∫–ª—é—á–µ–π** (–¥–æ–±–∞–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–ª—é—á–∏ –±–µ–∑ –Ω–æ–º–µ—Ä–∞)
2. **–£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –∞–Ω–∞–ª–∏–∑–∞** —Å 10 –¥–æ 30 –º–∏–Ω—É—Ç
3. **–°–¥–µ–ª–∞—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª –≤–∏–¥–∏–º—ã–º** (reveal: always, panel: dedicated)
4. **–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É —Å—Ç–∞—Ä—Ç–∞** (5 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –í–∞–∂–Ω—ã–µ (—Å–µ–≥–æ–¥–Ω—è)

5. **–î–æ–±–∞–≤–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é —Å –∞–≥–µ–Ω—Ç–∞–º–∏** (lock-—Ñ–∞–π–ª—ã)
6. **–û—Ç–∫–ª—é—á–∏—Ç—å MCP Monitor** (–∏–∑–±—ã—Ç–æ—á–µ–Ω, –µ—Å–ª–∏ –µ—Å—Ç—å Diagnostic Service)
7. **–£–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ diagnostic —Ñ–∞–π–ª—ã**

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –£–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

8. –î–æ–±–∞–≤–∏—Ç—å HTTP endpoint –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞
9. –°–æ–∑–¥–∞—Ç—å HTML dashboard —Å –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
10. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Prometheus metrics

---

## üìù –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì

–°–µ–π—á–∞—Å —Å–æ–∑–¥–∞–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é `background_diagnostic_service.py` —Å–æ –≤—Å–µ–º–∏ —Ñ–∏–∫—Å–∞–º–∏.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–ª—é—á–µ–π (DEEPSEEK_API_KEY, PERPLEXITY_API_KEY)
- ‚úÖ –ò–Ω—Ç–µ—Ä–≤–∞–ª –∞–Ω–∞–ª–∏–∑–∞ = 30 –º–∏–Ω—É—Ç
- ‚úÖ –ó–∞–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä—Ç–∞ = 5 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Å –∞–≥–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ lock-—Ñ–∞–π–ª—ã
- ‚úÖ –í–∏–¥–∏–º—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ–±–Ω–æ–≤–∏–º .vscode/tasks.json**

---

## üéØ –§–ò–ù–ê–õ–¨–ù–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

**–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ IDE:**
1. ‚úÖ Postgres + –º–∏–≥—Ä–∞—Ü–∏–∏
2. ‚úÖ Backend (uvicorn)
3. ‚úÖ Frontend (vite)
4. ‚úÖ MCP Server
5. ‚úÖ Background Diagnostic Service (**–ù–ï MCP Monitor!**)

**–¢–µ—Ä–º–∏–Ω–∞–ª—ã (–≤—Å–µ–≥–æ 5):**
1. Postgres
2. Backend
3. Frontend
4. MCP Server
5. Diagnostic Service (–≤–∏–¥–∏–º—ã–π, —Å –ª–æ–≥–∞–º–∏)

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚è±Ô∏è –ö–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥: MCP + –ø–µ—Ä–≤—ã–π –∫–ª—é—á –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- ‚è±Ô∏è –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç: –ø–æ–ª–Ω—ã–π AI –∞–Ω–∞–ª–∏–∑ –æ—Ç –æ–±–æ–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤ (–µ—Å–ª–∏ –∞–≥–µ–Ω—Ç—ã –Ω–µ –∑–∞–Ω—è—Ç—ã)
