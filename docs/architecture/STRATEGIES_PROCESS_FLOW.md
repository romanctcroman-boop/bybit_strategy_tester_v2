# ğŸ“Š Strategies Page - ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑÑ…ĞµĞ¼Ğ° Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ²

## âš ï¸ ĞĞĞ™Ğ”Ğ•ĞĞĞ«Ğ• ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ« Ğ˜ Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ¯

### ğŸ”´ ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ (Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ñ‹)

1. **Slippage Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞ»ÑÑ Ğ´Ğ²Ğ°Ğ¶Ğ´Ñ‹** 
   - ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: slippage Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞ»ÑÑ Ğº Ñ†ĞµĞ½Ğµ Ğ˜ Ğº ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸Ğ¸
   - Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: slippage Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² Ñ†ĞµĞ½Ğµ, commission Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾

2. **ĞšĞ¾Ğ¼Ğ¸ÑÑĞ¸Ğ¸ ÑÑ‡Ğ¸Ñ‚Ğ°Ğ»Ğ¸ÑÑŒ Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾**
   - ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: `fees * 2` Ğ² PnL, Ğ½Ğ¾ fees ÑƒĞ¶Ğµ Ğ¾Ñ‚ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ°
   - Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°ĞµĞ¼ entry_fees Ğ¸ exit_fees Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾

### ğŸŸ¡ ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ (Ğ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ğµ)

1. **Direction "both" Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ĞºĞ°Ğº "long"**
   - Fallback engine Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½ÑƒÑ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ»Ñ long/short
   - Ğ”Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸ Ğ½ÑƒĞ¶ĞµĞ½ vectorbt Ğ¸Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑĞ°Ñ‚ÑŒ engine

2. **Position size Ğ¾Ñ‚ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ cash**
   - Ğ•ÑĞ»Ğ¸ cash ÑƒĞ¼ĞµĞ½ÑŒÑˆĞ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ÑĞ»Ğµ ÑƒĞ±Ñ‹Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ ÑĞ´ĞµĞ»ĞºĞ¸, ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ°Ñ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ Ğ¼ĞµĞ½ÑŒÑˆĞµ
   - Ğ­Ñ‚Ğ¾ "compound" Ñ€ĞµĞ¶Ğ¸Ğ¼, Ğ½Ğµ "fixed" Ñ€Ğ°Ğ·Ğ¼ĞµÑ€

---

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (strategies.html)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  strategies.html          strategies.css          strategies.js             â”‚
â”‚  â”œâ”€â”€ Header/Nav           â”œâ”€â”€ Grid layout         â”œâ”€â”€ State management      â”‚
â”‚  â”œâ”€â”€ Toolbar/Filters      â”œâ”€â”€ Card styles         â”œâ”€â”€ API calls             â”‚
â”‚  â”œâ”€â”€ Strategy Cards       â”œâ”€â”€ Modal styles        â”œâ”€â”€ Event handlers        â”‚
â”‚  â”œâ”€â”€ Create/Edit Modal    â”œâ”€â”€ Form elements       â”œâ”€â”€ UI rendering          â”‚
â”‚  â””â”€â”€ Backtest Modal       â””â”€â”€ Animations          â””â”€â”€ Backtest logic        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ HTTP REST API
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND (FastAPI)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  routers/strategies.py                  routers/backtests.py                 â”‚
â”‚  â”œâ”€â”€ GET /strategies/                   â”œâ”€â”€ POST /backtests/from-strategy/  â”‚
â”‚  â”œâ”€â”€ GET /strategies/{id}               â”œâ”€â”€ GET /backtests/{id}             â”‚
â”‚  â”œâ”€â”€ POST /strategies/                  â”œâ”€â”€ GET /backtests/{id}/trades      â”‚
â”‚  â”œâ”€â”€ PUT /strategies/{id}               â”œâ”€â”€ GET /backtests/{id}/equity      â”‚
â”‚  â”œâ”€â”€ DELETE /strategies/{id}            â””â”€â”€ GET /backtests/{id}/metrics     â”‚
â”‚  â”œâ”€â”€ POST /strategies/{id}/activate                                         â”‚
â”‚  â””â”€â”€ POST /strategies/{id}/pause                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ SQLAlchemy ORM
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATABASE (SQLite)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  strategies table              backtests table              klines table     â”‚
â”‚  â”œâ”€â”€ id                        â”œâ”€â”€ id                       (market data)    â”‚
â”‚  â”œâ”€â”€ name                      â”œâ”€â”€ strategy_id                               â”‚
â”‚  â”œâ”€â”€ strategy_type             â”œâ”€â”€ start_date/end_date                      â”‚
â”‚  â”œâ”€â”€ status                    â”œâ”€â”€ metrics (JSON)                           â”‚
â”‚  â”œâ”€â”€ parameters (JSON)         â”œâ”€â”€ trades (JSON)                            â”‚
â”‚  â”œâ”€â”€ initial_capital           â””â”€â”€ created_at                               â”‚
â”‚  â”œâ”€â”€ total_return                                                            â”‚
â”‚  â”œâ”€â”€ sharpe_ratio                                                            â”‚
â”‚  â””â”€â”€ win_rate                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹

### 1ï¸âƒ£ Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DOMContentLoadedâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚loadTopSymbols() â”‚â”€â”€â”€â”€â–¶â”‚GET /api/v1/klinesâ”‚
â”‚                 â”‚     â”‚  /symbols/top   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚loadStrategies() â”‚â”€â”€â”€â”€â–¶â”‚GET /api/v1/     â”‚
â”‚                 â”‚     â”‚    strategies/  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚loadStrategyTypesâ”‚â”€â”€â”€â”€â–¶â”‚GET /api/v1/     â”‚
â”‚                 â”‚     â”‚strategies/types â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚setupEventListenersâ”‚
â”‚setupFilters()   â”‚
â”‚initPeriodButtonsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚renderStrategies()â”‚
â”‚ (Ğ¿Ğ¾ĞºĞ°Ğ· ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2ï¸âƒ£ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Click "New      â”‚
â”‚ Strategy"       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚openCreateModal()â”‚
â”‚ â”œâ”€ ÑĞ±Ñ€Ğ¾Ñ Ñ„Ğ¾Ñ€Ğ¼Ñ‹  â”‚
â”‚ â”œâ”€ Ğ¿Ğ¾ĞºĞ°Ğ· Ğ¼Ğ¾Ğ´Ğ°Ğ»Ğ° â”‚
â”‚ â””â”€ updateParams â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ     â”‚
â”‚Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ñƒ: â”‚
â”‚ â”œâ”€ ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ     â”‚
â”‚ â”œâ”€ Ğ¢Ğ¸Ğ¿          â”‚
â”‚ â”œâ”€ Ğ¡Ğ¸Ğ¼Ğ²Ğ¾Ğ»       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”œâ”€ Ğ¢Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼    â”‚              â”‚
â”‚ â”œâ”€ ĞšĞ°Ğ¿Ğ¸Ñ‚Ğ°Ğ»      â”‚              â–¼
â”‚ â”œâ”€ ĞŸĞ»ĞµÑ‡Ğ¾ â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â–¶ updateLeverageLimits()
â”‚ â”œâ”€ ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹    â”‚     â”œâ”€ fetchInstrumentInfo()
â”‚ â””â”€ Risk (SL/TP) â”‚     â”œâ”€ fetchCurrentPrice()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€ fetchVolatility()
         â”‚                   â”‚
         â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼                (Ğ¿Ğ¾ĞºĞ°Ğ· Ğ¼Ğ°ĞºÑ. Ğ¿Ğ»ĞµÑ‡Ğ° Ğ¸ Ñ€Ğ¸ÑĞºĞ°)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Click "Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ"â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚saveStrategy()   â”‚â”€â”€â”€â”€â–¶â”‚POST /api/v1/    â”‚
â”‚ â”œâ”€ ÑĞ±Ğ¾Ñ€ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…  â”‚     â”‚   strategies/   â”‚
â”‚ â”œâ”€ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”‚  â”œâ”€ _leverage â”‚              â”‚
â”‚ â”‚  â”œâ”€ _directionâ”‚              â–¼
â”‚ â”‚  â”œâ”€ _commissionâ”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚  â”œâ”€ _slippage â”‚      â”‚DB: INSERT       â”‚
â”‚ â”‚  â””â”€ _order_amtâ”‚      â”‚  strategies     â”‚
â”‚ â””â”€ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ    â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
                                  â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚loadStrategies() â”‚
                         â”‚renderStrategies()â”‚
                         â”‚showToast(success)â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3ï¸âƒ£ Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Click "Edit"    â”‚
â”‚ Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞµ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚editStrategy(id) â”‚â”€â”€â”€â”€â–¶â”‚GET /api/v1/     â”‚
â”‚                 â”‚     â”‚strategies/{id}  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ñ„Ğ¾Ñ€Ğ¼Ñ‹ â”‚
â”‚Ğ¸Ğ· strategy:     â”‚
â”‚ â”œâ”€ name         â”‚
â”‚ â”œâ”€ type         â”‚
â”‚ â”œâ”€ symbol       â”‚
â”‚ â”œâ”€ timeframe    â”‚
â”‚ â”œâ”€ capital      â”‚
â”‚ â”œâ”€ parameters:  â”‚
â”‚ â”‚  â”œâ”€ _leverage â”‚
â”‚ â”‚  â”œâ”€ _directionâ”‚
â”‚ â”‚  â”œâ”€ _position_â”‚
â”‚ â”‚  â”‚   size_typeâ”‚
â”‚ â”‚  â””â”€ _order_amtâ”‚
â”‚ â””â”€ SL/TP        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚updatePositionSizeInput()â”‚
â”‚(Ğ¿ĞµÑ€ĞµÑÑ‡Ñ‘Ñ‚ UI)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Click "Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ"â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚saveStrategy()   â”‚â”€â”€â”€â”€â–¶â”‚PUT /api/v1/     â”‚
â”‚                 â”‚     â”‚strategies/{id}  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4ï¸âƒ£ Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ±ÑĞºÑ‚ĞµÑÑ‚Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Click "Backtest"â”‚
â”‚ Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞµ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚openBacktestModalâ”‚
â”‚(strategyId)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚loadBacktestStratâ”‚             â”‚setDefaultDates()â”‚
â”‚egyInfo(id)      â”‚             â”‚(1 Ğ¼ĞµÑÑÑ† Ğ½Ğ°Ğ·Ğ°Ğ´)  â”‚
â”‚ â”œâ”€ GET strategy â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”œâ”€ Ğ¿Ğ¾ĞºĞ°Ğ· Ğ¸Ğ½Ñ„Ğ¾:  â”‚
â”‚ â”‚  â”œâ”€ Ğ¡Ğ¸Ğ¼Ğ²Ğ¾Ğ»    â”‚
â”‚ â”‚  â”œâ”€ Ğ¢Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼ â”‚
â”‚ â”‚  â”œâ”€ ĞšĞ°Ğ¿Ğ¸Ñ‚Ğ°Ğ»   â”‚
â”‚ â”‚  â”œâ”€ Ğ Ğ°Ğ·Ğ¼ĞµÑ€    â”‚
â”‚ â”‚  â”‚   Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸  â”‚
â”‚ â”‚  â””â”€ ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ â”‚
â”‚ â””â”€ leverage calcâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ     â”‚
â”‚Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´: â”‚
â”‚ â”œâ”€ 24 Ñ‡Ğ°ÑĞ°      â”‚
â”‚ â”œâ”€ ĞĞµĞ´ĞµĞ»Ñ       â”‚
â”‚ â”œâ”€ ĞœĞµÑÑÑ† (def)  â”‚
â”‚ â””â”€ 3 Ğ¼ĞµÑÑÑ†Ğ°     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚setBacktestPeriodâ”‚
â”‚(period)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Click "Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ â”‚
â”‚Ğ±ÑĞºÑ‚ĞµÑÑ‚"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚runBacktest()    â”‚â”€â”€â”€â”€â–¶â”‚POST /api/v1/backtests/from-strategyâ”‚
â”‚                 â”‚     â”‚     /{strategy_id}                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                              â”‚
         â”‚                              â–¼
         â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              â”‚Backend:                            â”‚
         â”‚              â”‚ 1. Load strategy from DB           â”‚
         â”‚              â”‚ 2. Extract _leverage, _direction,  â”‚
         â”‚              â”‚    _commission, _slippage,         â”‚
         â”‚              â”‚    _position_size_type, _order_amt â”‚
         â”‚              â”‚ 3. Calculate position_size:        â”‚
         â”‚              â”‚    if fixed_amount:                â”‚
         â”‚              â”‚      size = order_amt * leverage   â”‚
         â”‚              â”‚           / initial_capital        â”‚
         â”‚              â”‚ 4. Load klines data                â”‚
         â”‚              â”‚ 5. Generate signals (RSI/MACD/etc) â”‚
         â”‚              â”‚ 6. Run backtest engine:            â”‚
         â”‚              â”‚    â”œâ”€ Try vectorbt (fast)          â”‚
         â”‚              â”‚    â””â”€ Fallback engine (if no vbt)  â”‚
         â”‚              â”‚ 7. Calculate metrics               â”‚
         â”‚              â”‚ 8. Save to backtests table         â”‚
         â”‚              â”‚ 9. Update strategy metrics         â”‚
         â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                              â”‚
         â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚updateBacktestProgressâ”‚
â”‚(ÑÑ‚Ğ°Ñ‚ÑƒÑ, %, Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸)   â”‚
â”‚ â”œâ”€ "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…" â”‚
â”‚ â”œâ”€ "Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"â”‚
â”‚ â”œâ”€ "Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ±ÑĞºÑ‚ĞµÑÑ‚Ğ°"â”‚
â”‚ â””â”€ "Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾!"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚displayBacktestResultsâ”‚
â”‚(result)         â”‚
â”‚ â”œâ”€ Ğ”Ğ¾Ñ…Ğ¾Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ   â”‚
â”‚ â”œâ”€ Sharpe Ratio â”‚
â”‚ â”œâ”€ Win Rate     â”‚
â”‚ â”œâ”€ Max Drawdown â”‚
â”‚ â”œâ”€ Ğ¡Ğ´ĞµĞ»Ğ¾Ğº       â”‚
â”‚ â””â”€ Profit Factorâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Ğ•ÑĞ»Ğ¸ "Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ  â”‚
â”‚Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚" âœ“     â”‚
â”‚  loadStrategies()â”‚
â”‚  (Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5ï¸âƒ£ ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ†Ğ¸Ñ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Position Size Calculation                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  INPUT:                                                          â”‚
â”‚  â”œâ”€ initial_capital = $2,000                                     â”‚
â”‚  â”œâ”€ position_size_type = "fixed_amount"                          â”‚
â”‚  â”œâ”€ order_amount = $90                                           â”‚
â”‚  â””â”€ leverage = 10x                                               â”‚
â”‚                                                                  â”‚
â”‚  CALCULATION:                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ effective_order = order_amount Ã— leverage                   â”‚â”‚
â”‚  â”‚                 = $90 Ã— 10 = $900                           â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚ position_size = effective_order / initial_capital           â”‚â”‚
â”‚  â”‚               = $900 / $2,000 = 0.45 (45%)                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  BACKTEST EXECUTION:                                             â”‚
â”‚  â”œâ”€ ĞšĞ°Ğ¶Ğ´Ğ°Ñ ÑĞ´ĞµĞ»ĞºĞ° Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ½Ğ° $900 (45% ĞºĞ°Ğ¿Ğ¸Ñ‚Ğ°Ğ»Ğ°)            â”‚
â”‚  â”œâ”€ ĞŸÑ€Ğ¸Ğ±Ñ‹Ğ»ÑŒ/ÑƒĞ±Ñ‹Ñ‚Ğ¾Ğº Ã— leverage (10x) ÑÑ„Ñ„ĞµĞºÑ‚                      â”‚
â”‚  â””â”€ ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ñ€Ğ°ÑÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ¾Ñ‚Ğ½Ğ¾ÑĞ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ initial_capital         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 6ï¸âƒ£ Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ¿Ğ¾Ğ¸ÑĞº

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚User types in    â”‚
â”‚search/filter    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚debounce(300ms)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚renderStrategies()â”‚
â”‚ â”œâ”€ filter by    â”‚
â”‚ â”‚  searchText   â”‚
â”‚ â”œâ”€ filter by    â”‚
â”‚ â”‚  status       â”‚
â”‚ â”œâ”€ filter by    â”‚
â”‚ â”‚  type         â”‚
â”‚ â””â”€ update DOM   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

```
frontend/
â”œâ”€â”€ strategies.html          # HTML ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
â”œâ”€â”€ css/
â”‚   â””â”€â”€ strategies.css       # Ğ¡Ñ‚Ğ¸Ğ»Ğ¸ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
â””â”€â”€ js/
    â”œâ”€â”€ pages/
    â”‚   â””â”€â”€ strategies.js    # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° (1785 ÑÑ‚Ñ€Ğ¾Ğº)
    â””â”€â”€ utils.js             # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ (debounce Ğ¸ Ğ´Ñ€.)

backend/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”œâ”€â”€ strategies.py    # CRUD Ğ´Ğ»Ñ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¹
â”‚   â”‚   â””â”€â”€ backtests.py     # Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¸ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ±ÑĞºÑ‚ĞµÑÑ‚Ğ¾Ğ²
â”‚   â””â”€â”€ schemas.py           # Pydantic Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
â”œâ”€â”€ backtesting/
â”‚   â”œâ”€â”€ engine.py            # Backtest engine (vectorbt + fallback)
â”‚   â”œâ”€â”€ models.py            # BacktestConfig, BacktestResult
â”‚   â””â”€â”€ signals.py           # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ² (RSI, MACD, etc)
â””â”€â”€ db/
    â””â”€â”€ models.py            # SQLAlchemy Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
```

---

## ğŸ”§ ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ (strategies.js)

| Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|---------|----------|
| `loadStrategies()` | Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑĞ¿Ğ¸ÑĞºĞ° ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¹ Ğ¸Ğ· API |
| `renderStrategies()` | Ğ ĞµĞ½Ğ´ĞµÑ€ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ |
| `openCreateModal()` | ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ğ¼Ğ¾Ğ´Ğ°Ğ»Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ |
| `editStrategy(id)` | Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ |
| `saveStrategy()` | Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ (POST/PUT) ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ |
| `deleteStrategy(id)` | Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ |
| `duplicateStrategy(id)` | ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ |
| `activateStrategy(id)` | ĞĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ |
| `pauseStrategy(id)` | ĞŸĞ°ÑƒĞ·Ğ° ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ |
| `openBacktestModal(id)` | ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ğ¼Ğ¾Ğ´Ğ°Ğ»Ğ° Ğ±ÑĞºÑ‚ĞµÑÑ‚Ğ° |
| `runBacktest()` | Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ±ÑĞºÑ‚ĞµÑÑ‚Ğ° |
| `displayBacktestResults()` | ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² |
| `updateLeverageLimits()` | ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¼Ğ°ĞºÑ. Ğ¿Ğ»ĞµÑ‡Ğ° Ğ¸ Ñ€Ğ¸ÑĞºĞ° |
| `updatePositionSizeInput()` | ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¸Ğ¿Ğ° Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ |
| `fetchVolatility()` | Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ²Ğ¾Ğ»Ğ°Ñ‚Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ»Ñ Ñ€Ğ¸ÑĞº-Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ° |

---

## ğŸŒ API Endpoints

### Strategies

| Method | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|----------|----------|
| GET | `/api/v1/strategies/` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¹ |
| GET | `/api/v1/strategies/types` | Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¹ |
| GET | `/api/v1/strategies/{id}` | ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ |
| POST | `/api/v1/strategies/` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ |
| PUT | `/api/v1/strategies/{id}` | ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ |
| DELETE | `/api/v1/strategies/{id}` | Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ |
| POST | `/api/v1/strategies/{id}/activate` | ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ |
| POST | `/api/v1/strategies/{id}/pause` | ĞŸÑ€Ğ¸Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ |

### Backtests

| Method | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|----------|----------|
| POST | `/api/v1/backtests/from-strategy/{id}` | Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ±ÑĞºÑ‚ĞµÑÑ‚Ğ° |
| GET | `/api/v1/backtests/{id}` | Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ±ÑĞºÑ‚ĞµÑÑ‚Ğ° |
| GET | `/api/v1/backtests/{id}/trades` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑĞ´ĞµĞ»Ğ¾Ğº |
| GET | `/api/v1/backtests/{id}/equity` | ĞšÑ€Ğ¸Ğ²Ğ°Ñ ÑĞºĞ²Ğ¸Ñ‚Ğ¸ |
| GET | `/api/v1/backtests/{id}/metrics` | ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ |
| GET | `/api/v1/backtests/by-strategy/{id}` | Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ±ÑĞºÑ‚ĞµÑÑ‚Ğ¾Ğ² |

---

## ğŸ“Š Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²

```javascript
// ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ Ğ² JSON Ğ¿Ğ¾Ğ»Ğµ "parameters"
{
    // ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ° (Ğ·Ğ°Ğ²Ğ¸ÑÑÑ‚ Ğ¾Ñ‚ Ñ‚Ğ¸Ğ¿Ğ°)
    "period": 14,
    "overbought": 70,
    "oversold": 30,
    
    // Ğ¢Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ (Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑ _ Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ)
    "_leverage": 10,
    "_direction": "long",          // long | short | both
    "_commission": 0.0006,         // 0.06%
    "_slippage": 0.0005,           // 0.05%
    "_position_size_type": "fixed_amount",  // percent | fixed_amount | contracts
    "_order_amount": 90,           // $ Ğ´Ğ»Ñ fixed_amount
    "_pyramiding": 1               // Ğ¼Ğ°ĞºÑ. Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹
}
```

---

## âš ï¸ Ğ’Ğ°Ğ¶Ğ½Ñ‹Ğµ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸

1. **ĞŸĞ»ĞµÑ‡Ğ¾** Ğ½Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ¼ Ğ¿Ğ¾Ğ»Ğµ Ğ‘Ğ” - Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² `parameters._leverage`
2. **Direction** (long/short/both) Ğ²Ğ»Ğ¸ÑĞµÑ‚ Ğ½Ğ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²
3. **Position size** Ğ¿ĞµÑ€ĞµÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ Ğ±ÑĞºÑ‚ĞµÑÑ‚Ğµ
4. **Fallback engine** Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ ĞºĞ¾Ğ³Ğ´Ğ° vectorbt Ğ½Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½
5. **ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸** Ğ² fallback engine ÑƒĞ¼Ğ½Ğ¾Ğ¶Ğ°ÑÑ‚ÑÑ Ğ½Ğ° 100 Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ² %
