# –ó–∞–¥–∞—á–∞: –†–∞–∑–±–∏–µ–Ω–∏–µ app.py –Ω–∞ –º–æ–¥—É–ª–∏

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (Phase 1)

## –ü—Ä–æ–≥—Ä–µ—Å—Å

### ‚úÖ Phase 1: –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π (–ì–û–¢–û–í–û)

- [x] `backend/api/mcp/__init__.py` ‚Äî CircuitBreaker exports + register_all_tools
- [x] `backend/api/mcp/circuit_breaker.py` ‚Äî CircuitBreaker class
- [x] `backend/api/mcp/tools/__init__.py` ‚Äî Tools package
- [x] `backend/api/mcp/tools/agent_tools.py` ‚Äî Agent tools (DeepSeek, Perplexity)
- [x] `backend/api/mcp/tools/file_tools.py` ‚Äî File access tools
- [x] `backend/api/startup/__init__.py` ‚Äî Startup package
- [x] `backend/api/startup/warmup.py` ‚Äî Cache warmup
- [x] `backend/api/startup/refresh.py` ‚Äî Daily data refresh

### ‚úÖ Phase 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ app.py (–ì–û–¢–û–í–û)

- [x] –î–æ–±–∞–≤–ª–µ–Ω `register_all_tools(mcp)` –≤ app.py (—Å—Ç—Ä–æ–∫–∞ 600)
- [x] –ú–æ–¥—É–ª—å–Ω—ã–µ tools —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å inline tools
- [x] –°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–æ–≤–µ—Ä–µ–Ω: `Syntax OK!`

### ‚è≥ Phase 3: –£–¥–∞–ª–µ–Ω–∏–µ inline tools (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)

- [ ] –£–¥–∞–ª–∏—Ç—å inline Agent tools (—Å—Ç—Ä–æ–∫–∏ 659-927)
- [ ] –£–¥–∞–ª–∏—Ç—å inline File tools (—Å—Ç—Ä–æ–∫–∏ 929-1343)
- [ ] –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è CircuitBreaker class
- **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è**: ~690 —Å—Ç—Ä–æ–∫

## –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```text
backend/api/
‚îú‚îÄ‚îÄ mcp/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py           ‚úÖ –°–û–ó–î–ê–ù (35 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ circuit_breaker.py    ‚úÖ –°–û–ó–î–ê–ù (65 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ tools/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py       ‚úÖ –°–û–ó–î–ê–ù (7 —Å—Ç—Ä–æ–∫)
‚îÇ       ‚îú‚îÄ‚îÄ agent_tools.py    ‚úÖ –°–û–ó–î–ê–ù (280 —Å—Ç—Ä–æ–∫)
‚îÇ       ‚îî‚îÄ‚îÄ file_tools.py     ‚úÖ –°–û–ó–î–ê–ù (350 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ startup/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py           ‚úÖ –°–û–ó–î–ê–ù (15 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ warmup.py             ‚úÖ –°–û–ó–î–ê–ù (90 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ refresh.py            ‚úÖ –°–û–ó–î–ê–ù (110 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ app.py                    üîÑ 2271 —Å—Ç—Ä–æ–∫–∞ (—Ü–µ–ª—å: ~1500)
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|-----|-------|
| **–ú–æ–¥—É–ª–µ–π —Å–æ–∑–¥–∞–Ω–æ** | 0 | 8 |
| **–°—Ç—Ä–æ–∫ –∏–∑–≤–ª–µ—á–µ–Ω–æ** | 0 | ~950 |
| **–†–∞–∑–º–µ—Ä app.py** | 2260 | 2271* |
| **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è |

*–†–∞–∑–º–µ—Ä –ø–æ–∫–∞ –Ω–µ —É–º–µ–Ω—å—à–∏–ª—Å—è —Ç.–∫. inline tools –Ω–µ —É–¥–∞–ª–µ–Ω—ã.

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** ‚Äî –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å tools –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
2. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ
3. **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** ‚Äî tools –º–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö
4. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** ‚Äî app.py —Å—Ç–∞–Ω–µ—Ç ~1500 —Å—Ç—Ä–æ–∫ –≤–º–µ—Å—Ç–æ 2260

---

*–°–æ–∑–¥–∞–Ω–æ: 2026-01-23*
*–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2026-01-23 20:15*
*–ò—Å—Ç–æ—á–Ω–∏–∫: Clean Code Audit*
