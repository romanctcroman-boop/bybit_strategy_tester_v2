# Codebase Structure

> Auto-generated by GSD Bootstrap — 2026-02-18

## Summary

| Metric               | Value |
| -------------------- | ----- |
| Backend Python files | 557   |
| API Routers          | 79    |
| Backtest Engines     | 7     |
| Strategies (library) | 11    |
| Services             | 52    |
| Core modules         | 14    |
| Frontend HTML        | 51    |
| Frontend JS          | 3,178 |
| Frontend CSS         | 52    |
| Test files           | 179   |
| Tests collected      | 169   |

## Directory Layout

```
bybit_strategy_tester_v2/
├── backend/                          # Python backend (557 .py files)
│   ├── agents/                       # AI agent system (LLM connections)
│   ├── api/                          # FastAPI application
│   │   ├── app.py                    # Main FastAPI app
│   │   └── routers/                  # 79 router files (753 routes total)
│   ├── backtesting/                  # Core backtesting engine
│   │   ├── engines/                  # 7 backtest engines
│   │   │   ├── fallback_engine_v4.py # ⭐ Gold standard engine
│   │   │   ├── fallback_engine_v3.py # Previous version
│   │   │   ├── fallback_engine_v2.py # Deprecated (kept for parity tests)
│   │   │   ├── gpu_engine_v2.py      # GPU-accelerated engine
│   │   │   ├── numba_engine_v2.py    # Numba JIT engine
│   │   │   ├── dca_engine.py         # Dollar-cost averaging engine
│   │   │   └── event_driven_engine.py # Event-driven engine
│   │   ├── strategies/               # Strategy implementations
│   │   │   └── momentum_rsi_ema.py   # RSI+EMA momentum strategy
│   │   ├── dca_strategies/           # DCA-specific strategies
│   │   │   └── dca_multi_tp.py       # Multi-TP DCA strategy
│   │   ├── mtf/                      # Multi-timeframe support
│   │   │   ├── data_loader.py
│   │   │   ├── filters.py
│   │   │   ├── index_mapper.py
│   │   │   └── signals.py
│   │   └── universal_engine/         # Universal engine (33 modules)
│   │       ├── core.py / core_v23.py # Core engine logic
│   │       ├── optimizer.py          # Strategy optimization
│   │       ├── gpu_acceleration.py   # GPU support
│   │       ├── reinforcement_learning.py
│   │       ├── regime_detection.py
│   │       ├── sentiment_analysis.py
│   │       └── ... (27 more modules)
│   ├── config/                       # Configuration
│   │   └── database_policy.py        # DATA_START_DATE, RETENTION_YEARS
│   ├── core/                         # Core libraries (14 modules)
│   │   ├── metrics_calculator.py     # ⭐ 166 TradingView-parity metrics
│   │   ├── metrics.py                # Base metrics
│   │   ├── extended_metrics.py       # Extended metric set
│   │   ├── engine_adapter.py         # Engine abstraction layer
│   │   ├── config.py                 # Core configuration
│   │   ├── logging_config.py         # Loguru setup
│   │   ├── circuit_breaker.py        # Resilience pattern
│   │   ├── resilient_client.py       # HTTP client with retries
│   │   └── ...
│   ├── database/                     # Database layer
│   ├── experimental/                 # Experimental features
│   ├── mcp/                          # MCP server integration
│   ├── middleware/                    # FastAPI middleware
│   ├── migrations/                   # Alembic migrations
│   ├── ml/                           # Machine learning
│   ├── models/                       # SQLAlchemy models
│   ├── monitoring/                   # System monitoring
│   ├── optimization/                 # Strategy optimization
│   ├── queue/                        # Task queue
│   ├── reliability/                  # Reliability patterns
│   ├── security/                     # Auth & security
│   ├── services/                     # Business logic (52 files)
│   │   ├── adapters/                 # Exchange API adapters
│   │   │   ├── bybit.py             # ⭐ Primary Bybit adapter
│   │   │   ├── binance.py           # Binance adapter
│   │   │   ├── bybit_alembic.py     # Bybit + migration support
│   │   │   └── bybit_from_history.py # Historical data adapter
│   │   ├── strategies/               # Strategy service layer (11 strategies)
│   │   │   ├── base.py              # LibraryStrategy(BaseStrategy)
│   │   │   ├── breakout.py          # ATRBreakout, DonchianBreakout
│   │   │   ├── dca.py               # DCAStrategy
│   │   │   ├── grid_trading.py      # GridTradingStrategy
│   │   │   ├── mean_reversion.py    # RSIMeanReversion, BollingerBands
│   │   │   ├── momentum.py          # RSIMomentum, StochasticMomentum
│   │   │   └── trend_following.py   # EMACrossover, MACDTrend, TripleEMA
│   │   ├── advanced_backtesting/     # Walk-forward, Monte Carlo
│   │   ├── live_trading/             # Paper/live trading
│   │   ├── risk_management/          # Risk management
│   │   ├── strategy_builder/         # Strategy builder service
│   │   └── unified_trading/          # Unified trading interface
│   ├── tasks/                        # Background tasks
│   ├── trading/                      # Trading domain logic
│   ├── utils/                        # Utility functions
│   └── validation/                   # Input validation
├── frontend/                         # Static frontend
│   ├── css/                          # 52 CSS files
│   ├── js/                           # 3,178 JS files
│   │   └── pages/strategy_builder.js # Main UI (~3000 lines)
│   ├── libs/                         # JS libraries
│   ├── scripts/                      # Build/utility scripts
│   ├── tests/                        # Frontend tests
│   └── *.html                        # 51 HTML pages
├── tests/                            # Test suite (179 files, 169 tests)
├── mcp-server/                       # MCP server tools
├── scripts/                          # PowerShell automation scripts
├── deployment/                       # Docker, Helm, K8s
├── docs/                             # Documentation
│   ├── DECISIONS.md                  # Architecture Decision Records
│   └── architecture/                 # Component documentation
├── .github/                          # GitHub Copilot agents/prompts/skills
├── .gsd/                             # GSD workflow state
└── config/                           # External configuration
```

## Key Observations

1. **Strategy split**: 1 strategy in `backtesting/strategies/` vs 11 in `services/strategies/` — the service layer is the primary strategy home
2. **Universal engine is massive**: 33 modules covering GPU, RL, sentiment, risk parity, etc.
3. **Frontend-heavy**: 3,178 JS files suggests bundled/distributed libraries in `node_modules/` or `libs/`
4. **79 routers → 753 routes**: ~9.5 routes per router file average
5. **Backend is 22 top-level packages**: Highly modular architecture
