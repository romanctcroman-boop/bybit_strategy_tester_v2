---
description: Когда использовать Composer, Agent, @mentions, Privacy, MCP, выбор модели, терминал, изображения.
alwaysApply: true
---

# Дополнительные фичи Cursor

## Composer (Cmd+I / Ctrl+I)

- **Когда:** задачи на несколько файлов, архитектурные изменения, новая фича с зависимостями, рефакторинг нескольких компонентов.
- **Как формулировать:** конкретно: пути (backend/…, frontend/…), имена модулей, требования к тестам и документации. Плохо: «добавь функцию». Хорошо: «создай модуль X в backend/services/: функция Y(df) → Z, валидация, логирование, тесты в tests/».
- **Контроль:** анализ → план → изменения → Accept/Reject; можно остановить на любом этапе.

## Agent Mode

- **Когда:** полная автономная задача типа «создай фичу от А до Я» (стратегия + тесты + док + пример).
- **Ограничения:** подтверждение для критичных операций (удаление файлов); при зацикливании — использовать план в .cursor/plans/ или PROJECT_JOURNAL.md.

## @ Mentions (контекст)

- **@Codebase** — поиск по всему проекту («где используется strategy_params», «все вызовы Bybit API»).
- **@Folder** — анализ модуля (например `backend/backtesting`, `tests`).
- **@File** — разбор конкретного файла (логика метода, зависимости).
- **@Docs** — документация проекта (docs/, .agent/docs/).
- **@Web** — поиск в интернете (изменения Bybit API, примеры).
- **@Git** — история изменений (когда менялся файл, коммиты по теме).

## Privacy и .cursorignore

- **Privacy Mode:** включить в Settings → General для защиты ключей и торговых данных.
- **.cursorignore** (в корне проекта): не отправлять в AI — `.env`, `.env.*`, `*.key`, `*_secret*`, `*api_keys*`, `backend/config/encrypted_secrets.json`. При необходимости добавить `logs/`, `backtest_results/`, `historical_data/`. Код и тесты — отправлять.

## MCP

- Использовать доступные MCP-серверы (см. .cursor/mcp.json) для внешнего контекста: файловая система, браузер, Docker и т.д.
- При наличии Bybit/Database/TradingView MCP — запрашивать реальные данные или синхронизацию только через настроенные серверы и env.

## Выбор модели по задаче

- **Комплексный рефакторинг, архитектура, стратегии:** Claude / планирующие модели.
- **Быстрые правки, тесты, данные (pandas/numpy):** GPT-4o или аналог.
- **Рутина, комментарии, мелкий рефакторинг:** DeepSeek или быстрые модели (экономия кредитов).
- **Алгоритмы, оптимизация, сложная математика:** o1/o1-mini при необходимости.

## Терминал

- **Cmd+K / Ctrl+K в терминале:** формулировать задачу («запусти бэктест с config X на BTCUSDT 1h за последний месяц») — Cursor сгенерирует команду.
- **Ошибка в терминале:** Cursor может прочитать stacktrace, предложить фикс, применить и перезапустить.

## Изображения в чате

- **Скриншоты TradingView:** загрузить график/индикаторы — «воссоздай стратегию в Python».
- **Диаграммы архитектуры:** загрузить схему — «имплементируй эту архитектуру».
- **UI макеты, таблицы результатов:** фото/скриншот — «создай такой же интерфейс/таблицу».

## Связь с правилами проекта

- Декомпозиция и план: task-decomposition.mdc, planning.mdc.
- Контекст между сессиями: PROJECT_JOURNAL.md, project-journal.mdc.
- Пути и движки: project.mdc, backtesting.mdc.
- Критические переменные: trading-context.mdc.
