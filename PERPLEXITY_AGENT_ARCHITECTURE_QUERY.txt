"""
–ó–∞–ø—Ä–æ—Å –¥–ª—è DeepSeek Agent: Perplexity Agent Architecture

–ö–æ–Ω—Ç–µ–∫—Å—Ç:
- ‚úÖ DeepSeek Agent —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: 8 API –∫–ª—é—á–µ–π, load balancing, health monitoring
- ‚úÖ Perplexity –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω: Quick Wins 1-4 + Priority 1 (Unified Client)
- ü§î –í–æ–ø—Ä–æ—Å: –°–æ–∑–¥–∞–≤–∞—Ç—å –ª–∏ Perplexity Agent –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ DeepSeek Agent?

–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ Perplexity:
1. PerplexityProvider (MCP Server) - –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
   - SimpleCache (LRU + TTL)
   - Circuit Breaker (—á–µ—Ä–µ–∑ AIProvider)
   - Model Mapping (config-driven)
   - 1 API –∫–ª—é—á

2. PerplexityClient (Backend) - health checks
   - Shared caching strategy
   - Failure tracking
   - 1 API –∫–ª—é—á

DeepSeek Agent –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è):
1. DeepSeekAgentManager
   - 8 API –∫–ª—é—á–µ–π —Å round-robin rotation
   - Health monitoring (70%‚Üí95%+ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
   - Automatic failover
   - Load balancing
   - Memory leak detection (0.0% —Ä–æ—Å—Ç)

2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ DeepSeek Agent:
   - Wave 1: Agreement rate 0%‚Üí36.8%, speed 1.8x, timeout fix, heap eviction
   - Wave 2 Quick Wins: Similarity threshold, min response length, query normalization
   - Wave 2 Priority 3: Load balancing with health monitoring
   - Wave 2 Priority 4: Memory leak detection

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è Perplexity Agent:
- 4 Perplexity API –∫–ª—é—á–∞ (Perplexity API_1..4)
- –ú–æ–¥–µ–ª—å: sonar-pro (–º–æ—â–Ω–∞—è –º–æ–¥–µ–ª—å —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–ø–æ–∏—Å–∫–æ–º)

–í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:

1. **Architecture Decision**
   - –°—Ç–æ–∏—Ç –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å PerplexityAgentManager –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å DeepSeekAgentManager?
   - –ò–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–µ–∫—É—â–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (Quick Wins + Priority 1)?

2. **Load Balancing**
   - –ù—É–∂–µ–Ω –ª–∏ round-robin rotation –º–µ–∂–¥—É 4 API –∫–ª—é—á–∞–º–∏?
   - –ò–ª–∏ Perplexity API –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Ç–∞–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è failover?

3. **Health Monitoring**
   - –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ —Ç–µ–∫—É—â–µ–≥–æ Circuit Breaker?
   - –ò–ª–∏ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π health monitoring –∫–∞–∫ –≤ DeepSeek Agent?

4. **Performance**
   - –ö–∞–∫–∏–µ bottlenecks —É Perplexity API?
   - Rate limits: Perplexity vs DeepSeek?
   - Response time: Perplexity (10-15s) vs DeepSeek (5-10s)?

5. **Cost/Benefit**
   - –í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: ~3-4 —á–∞—Å–∞ (–ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å DeepSeek Agent)
   - –û–∂–∏–¥–∞–µ–º–∞—è –ø–æ–ª—å–∑–∞: —Å–Ω–∏–∂–µ–Ω–∏–µ rate limit errors, —É–≤–µ–ª–∏—á–µ–Ω–∏–µ availability
   - ROI: —Å—Ç–æ–∏—Ç –ª–∏ —É—Å–∏–ª–∏–π?

6. **Integration**
   - –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ Quick Wins (Cache, Circuit Breaker)?
   - Backward compatibility —Å —Ç–µ–∫—É—â–∏–º API?

7. **Alternative Approach**
   - –ú–æ–∂–µ—Ç –ø—Ä–æ—â–µ –¥–æ–±–∞–≤–∏—Ç—å key rotation –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π PerplexityProvider?
   - –ò–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è Agent –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞?

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç –æ—Ç DeepSeek Agent:
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–ª–∏ –Ω–µ—Ç Perplexity Agent
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å)
- –°–ø–∏—Å–æ–∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –∏–∑ DeepSeek Agent
- –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ—Å—Ç—å (High/Medium/Low)

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: JSON
{
  "recommendation": "create_agent" | "enhance_existing" | "not_needed",
  "reasoning": "...",
  "architecture": {
    "components": [...],
    "optimizations_to_adapt": [...],
    "new_features": [...]
  },
  "implementation": {
    "estimated_time": "3-4 hours",
    "priority": "high" | "medium" | "low",
    "complexity": "high" | "medium" | "low"
  },
  "benefits": {
    "availability_increase": "70% ‚Üí 95%+",
    "rate_limit_reduction": "...",
    "failover_capability": "..."
  },
  "comparison": {
    "deepseek_agent_features": [...],
    "perplexity_agent_features": [...],
    "differences": [...]
  }
}
"""
