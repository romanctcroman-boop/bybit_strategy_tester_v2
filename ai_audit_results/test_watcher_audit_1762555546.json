{
  "timestamp": 1762555546,
  "changed_files": [
    "send_to_deepseek_full_analysis.py",
    "test_apis_simple.py",
    "test_parallel_deepseek.py",
    "backend\\api\\deepseek_client.py",
    "automation\\metrics\\__init__.py",
    "automation\\metrics\\collectors\\system_collector.py",
    "tests\\test_safe_async_bridge_final.py",
    "tests\\integration\\test_e2e_audit_agent.py",
    "backend\\migrations\\versions\\add_reasoning_traces.py",
    "tests\\recovery\\test_network_failure.py",
    "audit_agent_quick_check.py",
    "tests\\test_safe_async_bridge.py",
    "automation\\sync_async_wrapper.py",
    "deepseek_automation_split_tasks.py",
    "automation\\metrics\\collectors\\audit_agent_collector.py",
    "backend\\security\\key_rotation.py",
    "tests\\test_security_enhancements.py",
    "tests\\recovery\\__init__.py",
    "backend\\migrations\\versions\\20251107_merge_all_heads.py",
    "send_validation_to_ai.py",
    "tests\\integration\\test_e2e_test_watcher.py",
    "tests\\monitoring\\__init__.py",
    "tests\\stress\\test_memory_leaks.py",
    "audit_agent_deep_check.py",
    "tests\\stress\\test_parallel_execution.py",
    "test_watcher_quick_check.py",
    "tests\\recovery\\test_component_crash.py",
    "backend\\api\\parallel_deepseek_client.py",
    "automation\\safe_async_bridge.py",
    "automation\\task2_key_manager\\test_key_manager.py",
    "deepseek_automation_full_response.py",
    "tests\\test_safe_async_bridge_simple.py",
    "test_decryption.py",
    "test_watcher_deep_check.py",
    "backend\\api\\perplexity_client.py",
    "monitoring\\test_alerts.py",
    "tests\\integration\\test_e2e_test_watcher_v2.py",
    "backend\\security\\secure_storage.py",
    "backend\\migrations\\versions\\add_reasoning_kb_001.py",
    "deepseek_automation_tasks_query.py",
    "tests\\recovery\\test_disk_full.py",
    "automation\\task3_audit_agent\\config.py",
    "automation\\metrics\\custom_metrics.py",
    "automation\\task1_test_watcher\\test_watcher_parallel.py",
    "automation\\metrics\\prometheus_exporter.py",
    "tests\\test_audit_agent_integration.py",
    "tests\\test_sync_async_wrapper.py",
    "backend\\migrations\\versions\\perf_indexes_001_add_performance_indexes.py",
    "tests\\stress\\test_api_rate_limits.py",
    "automation\\task2_key_manager\\encrypt_secrets.py",
    "automation\\metrics\\collectors\\__init__.py",
    "tests\\monitoring\\test_metrics_export.py",
    "auto_encrypt_keys.py",
    "add_deepseek_keys.py",
    "send_full_analysis_to_deepseek.py",
    "demo_prometheus_metrics.py",
    "send_compact_to_deepseek.py"
  ],
  "test_results": {
    "pytest_exit_code": -1,
    "coverage_total": 0,
    "coverage_by_file": {},
    "timestamp": 1762555528.9161322,
    "success": false,
    "error": "I/O operation on closed file."
  },
  "analysis_results": {
    "analysis": "Based on the test results, here are the key insights:\n\n## 1. Test Quality Assessment\n**CRITICAL FAILURE** - Tests are completely broken:\n- Exit code -1 indicates abnormal termination (segmentation fault, memory issues, or fatal Python errors)\n- 0% coverage suggests tests aren't executing properly\n- Likely systemic infrastructure or dependency issues\n\n## 2. Coverage Analysis\n**NO COVERAGE DATA** - This is a major red flag:\n- No files show any coverage percentages\n- Either tests aren't running or coverage collection is broken\n- Impossible to assess actual code coverage quality\n\n## 3. Potential Issues with Recent Changes\n**High-risk areas based on changed files:**\n- **Security changes**: `key_rotation.py`, `secure_storage.py`, `test_security_enhancements.py` - could be causing authentication failures\n- **Database migrations**: Multiple migration files - potential schema conflicts\n- **Async/parallel changes**: `parallel_deepseek_client.py`, `safe_async_bridge.py` - likely concurrency issues\n- **New monitoring**: Prometheus metrics and collectors - dependency conflicts\n\n## 4. Immediate Recommendations\n\n**Priority 1 - Fix Test Infrastructure:**\n```bash\n# Run minimal test to isolate crash\npython -m pytest tests/test_safe_async_bridge_simple.py -v\n# Check for import/dependency issues\npython -c \"import backend.api.deepseek_client\"\n```\n\n**Priority 2 - Investigate Crash Sources:**\n- Check recent security/migration changes first\n- Verify all dependencies are compatible\n- Look for circular imports or memory issues in async code\n\n**Priority 3 - Restore Basic Testing:**\n- Fix one simple test file first (e.g., `test_safe_async_bridge_simple.py`)\n- Gradually re-enable test categories\n\n## 5. Risk Assessment\n**HIGH RISK** - Deployment would be extremely dangerous:\n- No functioning test suite\n- Multiple security and database changes untested\n- Potential for data corruption or security vulnerabilities\n- Async/concurrency changes could cause production instability\n\n**Immediate Action:** Halt all deployments until basic test functionality is restored and you achieve at least 70% coverage on critical paths.",
    "model": "deepseek-chat",
    "usage": {
      "prompt_tokens": 803,
      "completion_tokens": 464,
      "total_tokens": 1267,
      "prompt_tokens_details": {
        "cached_tokens": 64
      },
      "prompt_cache_hit_tokens": 64,
      "prompt_cache_miss_tokens": 739
    },
    "success": true
  },
  "metadata": {
    "watch_path": "D:\\bybit_strategy_tester_v2",
    "debounce_seconds": 20
  }
}